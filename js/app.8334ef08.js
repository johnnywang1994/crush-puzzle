(function(e){function t(t){for(var n,r,l=t[0],o=t[1],c=t[2],h=0,p=[];h<l.length;h++)r=l[h],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,l=1;l<i.length;l++){var o=i[l];0!==a[o]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={app:0},s=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=o;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("p",[e._v("Your points: "+e._s(e.points))]),i("crush-puzzle",{attrs:{ratio:7},on:{count:e.onCount}}),i("h1",[e._v("Vue Crush Puzzle")]),e._m(0),i("h3",[e._v("Essential Links")]),e._m(1),i("footer",[e._v(" Copyright Â© 2020-present, Johnny Wang ")])],1)},s=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("p",[e._v(" A simple component for creating a crush puzzle game "),i("br"),i("a",{attrs:{href:"#"}},[e._v(" vue-crush-puzzle documentation(Now working) ")]),e._v(". ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",[i("li",[i("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Vue Core Docs")])])])}],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"jewel-board"},e._l(e.jewelList,(function(t,n){return i("div",{key:"jewel_board_"+n,staticClass:"jewel-col"},e._l(t,(function(t,a){return i("div",{key:"jewel_item_"+t.id,class:["jewel",{bomb:0===t.tag,col:2===t.tag,row:3===t.tag,same:4===t.tag,picked:e.pick&&t.id===e.selectJewel[0].jewel.id}],on:{click:function(i){return e.onJewelClick(i,t,n,a)}}},[i("img",{directives:[{name:"show",rawName:"v-show",value:0!==t.tag,expression:"jewel.tag !== 0"}],attrs:{src:e.icons[t.value]}}),i("img",{directives:[{name:"show",rawName:"v-show",value:0===t.tag,expression:"jewel.tag === 0"}],attrs:{src:e.icons.bomb}})])})),0)})),0)},l=[],o=(i("99af"),i("4de4"),i("4160"),i("fb6a"),i("a434"),i("a9e3"),i("ac1f"),i("466d"),i("159b"),i("2909")),c=i("3835"),u={1:"https://stickershop.line-scdn.net/stickershop/v1/sticker/14015619/android/sticker.png",2:"https://stickershop.line-scdn.net/stickershop/v1/sticker/14015631/android/sticker.png",3:"https://stickershop.line-scdn.net/stickershop/v1/sticker/14015629/android/sticker.png",4:"https://stickershop.line-scdn.net/stickershop/v1/sticker/14015625/android/sticker.png",5:"https://stickershop.line-scdn.net/stickershop/v1/sticker/14015614/android/sticker.png",bomb:"https://img.icons8.com/office/80/000000/explosion.png"},h={name:"CrushPuzzle",emits:["count"],props:{match:{type:Number,default:3,description:"Minimun jewel number should match"},ratio:{type:Number,default:5,description:"Puzzle ratio"},icons:{type:Object,default:function(){return u},description:"Jewel icon urls"},jewelTypes:{type:Number,default:4,description:"Jewel type number used in puzzle. should <= stickers length"}},data:function(){return{points:0,jewelList:[],selectJewel:[],jewelUid:0,hasInit:!1,pick:!1}},methods:{randomNum:function(){return Math.ceil(Math.random()*this.jewelTypes)},createJewel:function(e){var t=this,i=t.jewelList,n=i[e].length?i[e][i[e].length-1].value:0,a=t.randomNum();while(a===n)a=t.randomNum();return t.jewelUid++,{id:t.jewelUid,tag:1,value:a}},findJewelById:function(e){for(var t=this.jewelList,i={},n=0;n<this.ratio;n++)for(var a=0;a<this.ratio;a++)if(t[n][a].id===e){i.i=n,i.j=a;break}return i},initBoard:function(){for(var e=this.ratio,t=this.jewelList,i=0;i<e;i++){t[i]=[];for(var n=0;n<e;n++)t[i][n]=this.createJewel(i)}this.scanBoard()},scanBoard:function(){for(var e=this.ratio,t=0;t<e;t++)for(var i=0;i<e;i++)this.scan(t,i),this.replaceTag()},onJewelClick:function(e,t,i,n){this.pick=!this.pick,this.selectJewel.push({ev:e,jewel:t,i:i,j:n}),this.pick?this.firstPick():this.secondPick()},firstPick:function(){},secondPick:function(){this.exchange()},exchange:function(){var e=Object(c["a"])(this.selectJewel,2),t=e[0],i=e[1],n=this.checkIsNear(t,i),a=this.checkIsSuper(t,i);if(n)if(a)this.superHandler(t,i),this.replaceTag();else{this.changeJewel(t,i);var s=this.scan(t.i,t.j),r=this.scan(i.i,i.j);s||r?this.replaceTag():this.changeJewel(t,i)}this.selectJewel=[]},changeJewel:function(e,t){var i=this.jewelList,n=i[e.i][e.j],a=i[t.i][t.j],s=n.value,r=n.tag;n.value=a.value,n.tag=a.tag,a.value=s,a.tag=r},checkIsNear:function(e,t){return e.i===t.i?1===Math.abs(e.j-t.j):1===Math.abs(e.i-t.i)&&e.j===t.j},checkIsSuper:function(e,t){return 1!==e.jewel.tag&&1!==t.jewel.tag},superHandler:function(e,t){e.jewel.tag===t.jewel.tag?(2===e.jewel.tag&&(this.specialColHandle(e.i),this.specialColHandle(t.i)),3===e.jewel.tag&&(this.specialRowHandle(e.j),this.specialRowHandle(t.j))):(this.specialColHandle(e.i),this.specialRowHandle(e.j))},scan:function(e,t){var i=this.ratio,n=this.match,a=this.jewelList,s=a[e],r=a[e][t].value,l=e,o=e,c=t,u=t;while(s[c-1]&&s[c-1].value===r)c--;while(s[u+1]&&s[u+1].value===r){if(u+1>=i)break;u++}while(a[l-1]&&a[l-1][t]&&a[l-1][t].value===r)l--;while(a[o+1]&&a[o+1][t]&&a[o+1][t].value===r)o++;return this.removeColWithTag(e,t,c,u),this.removeRowWithTag(e,t,l,o),u-c>=n-1||o-l>=n-1},specialColHandle:function(e){var t=this;this.jewelList[e].forEach((function(e){if(3===e.tag){var i=t.findJewelById(e.id),n=i.j;t.specialRowHandle(n)}4===e.tag&&t.specialSameHandle(e.value),e.tag=0}))},specialRowHandle:function(e){for(var t=0;t<this.ratio;t++){var i=this.jewelList[t][e];if(2===i.tag){var n=this.findJewelById(i.id),a=n.i;this.specialColHandle(a)}4===i.tag&&this.specialSameHandle(i.value),i.tag=0}},specialSameHandle:function(e){for(var t=this.jewelList,i=0;i<this.ratio;i++)for(var n=0;n<this.ratio;n++){var a=t[i][n];a.value===e&&(2===a.tag&&this.specialColHandle(i),3===a.tag&&this.specialRowHandle(n),a.tag=0)}},removeColWithTag:function(e,t,i,n){var a,s=this;if(!(n-i<this.match-1)){var r=this.jewelList,l=i,c=n+1,u=r[e].slice(l,c);u.forEach((function(t){if(1===t.tag)t.tag=0;else if(2===t.tag)s.specialColHandle(e);else if(3===t.tag){var i=s.findJewelById(t.id),n=i.j;s.specialRowHandle(n)}else 4===t.tag&&s.specialSameHandle(t.value)})),(a=r[e]).splice.apply(a,[l,c-l].concat(Object(o["a"])(u))),c-l>this.match&&(r[e][t].tag=c-l===4?2:4),this.$forceUpdate()}},removeRowWithTag:function(e,t,i,n){if(!(n-i<this.match-1)){var a=this.jewelList,s=i,r=n;while(s<=r){var l=a[s][t];if(1===l.tag)l.tag=0;else{if(2===l.tag){var o=this.findJewelById(l.id),c=o.i;this.specialColHandle(c)}3===l.tag&&this.specialRowHandle(t),4===l.tag&&this.specialSameHandle(l.value)}s++}n-i+1>this.match&&(a[e][t].tag=n-i+1===4?3:4),this.$forceUpdate()}},replaceTagHandler:function(){for(var e=this.ratio,t=this.jewelList,i=this.hasInit,n=!1,a=0,s=0;s<e;s++){var r=t[s].filter((function(e){return 0!==e.tag}));t[s].length!==r.length&&(n=!0,a+=t[s].length-r.length),t[s]=r;while(t[s].length<e)t[s].push(this.createJewel(s))}i&&(this.points+=a),i&&this.$emit("count",this.points),n?this.scanBoard():this.$forceUpdate()},replaceTag:function(){var e=this;e.hasInit?setTimeout(e.replaceTagHandler,500):(e.replaceTagHandler(),e.hasInit=!0)}},created:function(){this.initBoard()}},p=h,d=(i("8ce6"),i("2877")),f=Object(d["a"])(p,r,l,!1,null,null,null),v=f.exports,g={name:"App",components:{CrushPuzzle:v},data:function(){return{points:0}},methods:{onCount:function(e){this.points=e}}},w=g,m=(i("5c0b"),Object(d["a"])(w,a,s,!1,null,null,null)),j=m.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(j)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var n=i("9c0c"),a=i.n(n);a.a},"8ce6":function(e,t,i){"use strict";var n=i("e23a"),a=i.n(n);a.a},"9c0c":function(e,t,i){},e23a:function(e,t,i){}});
//# sourceMappingURL=app.8334ef08.js.map